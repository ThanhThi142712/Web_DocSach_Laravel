jQuery(function(){function e(e){return(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.toLowerCase()).replace(/à|á|ạ|ả|ã|â|ầ|ấ|ậ|ẩ|ẫ|ă|ằ|ắ|ặ|ẳ|ẵ/g,"a")).replace(/è|é|ẹ|ẻ|ẽ|ê|ề|ế|ệ|ể|ễ/g,"e")).replace(/ì|í|ị|ỉ|ĩ/g,"i")).replace(/ò|ó|ọ|ỏ|õ|ô|ồ|ố|ộ|ổ|ỗ|ơ|ờ|ớ|ợ|ở|ỡ/g,"o")).replace(/ù|ú|ụ|ủ|ũ|ư|ừ|ứ|ự|ử|ữ/g,"u")).replace(/ỳ|ý|ỵ|ỷ|ỹ/g,"y")).replace(/đ/g,"d")).replace(/!|@|\$|%|\^|\*|\(|\)|\+|\=|\<|\>|\?|\/|,|\.|\:|\'| |\"|\&|\#|\[|\]|~/g,"-")).replace(/-+-/g,"-")).replace(/^\-+|\-+$/g,"")}jQuery("#top-search-form").submit(function(){return $("#keyword").val().length>0}),jQuery("#input_searchword").attr("url_author_icon"),jQuery("#input_searchword").attr("author_icon_height"),jQuery("#input_searchword").attr("url_content_icon"),jQuery("#input_searchword").attr("content_icon_height"),jQuery("#keyword").autocomplete_suggestion("https://waka.vn/wakasuggest",{dataType:"json",width:$("#keyword").width(),height:400,minChars:1,resultsClass:"ac_results ",highlight:function(e,a){return e},parse:function(e,a){var t=[],r=e.highlighting;return jQuery.each(e.grouped.type.groups,function(e,a){a.doclist.docs.forEach(function(e,a){var c="";switch(e.type){case"book":c="Sách";break;case"comic":c="Truyện tranh";break;case"magazine":c="Tạp chí";break;case"author":c="Tác giả";break;case"collection":c="Tuyển tập";break;case"audio":c="Sách nói";break;case"sum_book":c="Sách tóm tắt";break;case"review":c="Review"}var o={type:"item",item_type:e.type,id:e.id,group_name:c,real_id:e.real_id,name:e.name,authors:e.extra1,name_hl:r[e.id].name_autocomplete_ngram,extra_hl:r[e.id].extra1?r[e.id].extra1[0]:""};t.push({data:o,value:t.length.toString(),result:o.name_hl[0].replace(/(&nbsp;|<([^>]+)>)/gi,"")})})}),t},formatItem:function(e){return function(e){switch(e.type){case"group":return'<span><b class="search_title_1"> '+e.name+" ("+e.numfound+')</b></span><span class="search_arrow"></span><div class="search_br"></div>';case"item":return'<div class="search_content"><div class="suggest_keyword">'+e.name_hl+"</div>"+(""!=e.extra_hl.trim()?'<span style="float: left">&nbsp;&nbsp;-&nbsp;&nbsp;</span><div class="search_author">'+e.extra_hl+"</div>":"")+'&nbsp;&nbsp;<div class="group_type">('+e.group_name+")</div>"}}(e)}}).result(function(a,t){if(window.location.origin,"item"==t.type){var r=t.id.replace(/(.*)_(\d*)/g,"$1"),c=t.id.replace(/(.*)_(\d*)/g,"$2"),o=new Hashids("Vegawaka").encode(parseInt(c))+"W",n=e(t.name),i="";switch(r){case"book":case"sum_book":i="/"+n+"-"+$.map(t.authors,function(a,t){return e(a)}).join("-")+"-b"+o+".html";break;case"comic":i="/truyen-tranh/"+n+"-o"+o+".html";break;case"magazine":i="/tap-chi-chi-tiet/"+n+"-m"+o+".html";break;case"bookauthor":i="/tac-gia/"+n+"-a"+o+".html";break;case"comicauthor":break;case"bookcollect":i="/tuyen-tap-sach/"+n+"-c"+o+".html";break;case"comiccollect":case"magazinecollect":break;case"audio":i="/"+n+"-e"+o+".html";break;case"review":i="/"+n+"-f"+o+".html"}return""!=i&&($.post("/site/log-search-click.html",{keyword:$(a.target).val(),use_es:1,content_id:c,content_type:r,content_name:t.name}),window.location.href=i),!1}if("group"==t.type)switch(t.grouptype){case"book":window.location.href="/search-book?q="+$(a.target).val();break;case"comic":window.location.href="/search-comic?q="+$(a.target).val();break;case"magazine":window.location.href="/search-magazine?q="+$(a.target).val();break;case"author":window.location.href="/search-author?q="+$(a.target).val();break;case"collection":window.location.href="/search-collection?q="+$(a.target).val()}}).enter(function(e,a){a.length>0&&(window.location.href="/search?q="+a)}),jQuery("body").on("click",".search-btn",function(e){var a=jQuery("#keyword").val();console.log(a),a.length>0&&(window.location.href="/search?q="+a)})});